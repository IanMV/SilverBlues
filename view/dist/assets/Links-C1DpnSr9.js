import{h as f,i as A,c as p,o as d,e as j,v as k,u as c,d as u,j as x,k as C,l as G,g as b,t as v,_ as E}from"./index-DjzdcREA.js";const l=f("email",()=>({email:A("")})),Z={id:"emailCamp"},ge={__name:"EmailCamp",setup(e){const s=l();return(r,a)=>(d(),p("li",Z,[j(u("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>c(s).email=t),placeholder:"Email..."},null,512),[[k,c(s).email]])]))}},$=f("password",()=>({password:A("")})),D={id:"passwordCamp"},qe={__name:"PasswordCamp",setup(e){const s=$();return(r,a)=>(d(),p("li",D,[j(u("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>c(s).password=t),placeholder:"Password.."},null,512),[[k,c(s).password]])]))}},I=f("isRegisterPage",()=>({isRegisterPage:A(!0)})),O=f("steps",()=>x({one:!0,two:!1,three:!1})),g=f("messageRequire",()=>({messageRequire:x({appear:!1,message:""})}));async function w(e){return new Promise(s=>setTimeout(s,e))}const U=l(),y=g();async function M(){let e=!1;for(let s=0;s<3&&!e;s++){try{let r=!1;for(let a=0;a<5&&!r;a++)if((await(await fetch("http://localhost:3000/email/send-email-verification-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({remittee:U.email})})).json()).success){r=!0,e=!0,y.messageRequire.appear=!1;return}r||(y.messageRequire.appear=!0,y.messageRequire.message="*An error occurred.")}catch(r){console.error("Error: ",r)}await w(3e3)}e||(y.messageRequire.appear=!0,y.messageRequire.message="*An error occurred.")}const F=l(),R=g();async function H(){let e=!1;for(let s=0;s<3&&!e;s++){try{let r=!1;for(let a=0;a<5&&!r;a++){const o=await(await fetch("http://localhost:3000/email/code-existence-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:F.email})})).json();if(o.success)if(e=!0,r=!0,o.email){M();return}else{R.messageRequire.appear=!0,R.messageRequire.message="*This email has already received an email verification code.";return}}r||(R.messageRequire.appear=!0,R.messageRequire.message="*An error occurred.")}catch(r){console.error("Error:",r)}await w(3e3)}e||(R.messageRequire.appear=!0,R.messageRequire.message="*An error occurred.")}const K=f("codeValue",()=>{const e=x({one:void 0,two:void 0,three:void 0,four:void 0,five:void 0,six:void 0}),s=C(()=>`${e.one}${e.two}${e.three}${e.four}${e.five}${e.six}`);return{codes:e,code:s}}),Q=K(),W=l(),i=g(),X=O();async function Y(){for(let e=0;e<3;e++){try{let s=!1;for(let r=0;r<5&&!s;r++){const t=await(await fetch("http://localhost:3000/email/email-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:W.email,code:Q.code})})).json();if(t.success){if(!t.found&&!t.code&&!t.valid){i.messageRequire.appear=!0,i.messageRequire.message="*The code does not exist, please send the email.";return}if(t.found&&!t.code&&!t.valid){i.messageRequire.appear=!0,i.messageRequire.message="*Expired code, please resend email.";return}if(t.found&&!t.code&&t.valid){i.messageRequire.appear=!0,i.messageRequire.message="*Invalid code.";return}if(t.found&&t.code&&t.valid){i.messageRequire.appear=!1,X.three=!0;return}}}if(!s){i.messageRequire.appear=!0,i.messageRequire.message="*An error occurred.";return}}catch(s){console.error("Error:",s)}await w(3e3)}i.messageRequire.appear=!0,i.messageRequire.message="*An error occurred."}const ee=l(),h=g();async function se(){let e=!1;for(let s=0;s<3&&!e;s++){try{let r=!1;for(let a=0;a<5&&!r;a++){const o=await(await fetch("http://localhost:3000/email/resend-email-verification-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ee.email})})).json();if(o.success)if(e=!0,r=!0,o.email){M();return}else{h.messageRequire.appear=!0,h.messageRequire.message="*A code was sent less than a minute ago. Please wait until you request another one.";return}}r||(h.messageRequire.appear=!0,h.messageRequire.message="*An error occurred.")}catch(r){console.error("Error:",r)}await w(3e3)}e||(h.messageRequire.appear=!0,h.messageRequire.message="*An error occurred.")}const re=l(),ae=$(),m=g();async function te(){let e=!1;for(let s=0;s<3&&!e;s++){try{let r=!1;for(let a=0;a<5&&!r;a++){const o=await(await fetch("http://localhost:3000/user/user-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:re.email,password:ae.password})})).json();if(console.log(o.message),o.success)if(o.login){r=!0,e=!0,m.messageRequire.appear=!1,console.log("Login feito.");return}else{m.messageRequire.message="*Email our password invalid.",m.messageRequire.appear=!0;return}}r||(m.messageRequire.appear=!0,m.messageRequire.message="*An error occurred.")}catch(r){console.error("An error occurred.:",r)}await w(3e3)}e||(m.messageRequire.appear=!0,m.messageRequire.message="*An error occurred.")}const oe=f("nameValue",()=>({name:A("")})),T=l(),V=$(),_=g(),S=oe();async function ne(){for(let e=0;e<3;e++){try{let s=!1;for(let r=0;r<5&&!s;r++)if((await(await fetch("http://localhost:3000/user/user-register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:T.email,password:V.password,name:S.name})})).json()).success){_.messageRequire.appear=!1,V.password="",T.email="",S.name="";return}s||(_.messageRequire.appear=!0,_.messageRequire.message="*An error occurred.")}catch(s){console.error("Error:",s)}await w(3e3)}_.messageRequire.appear=!0,_.messageRequire.message="*An error occurred."}const ie={key:0},ue={key:1},Re={__name:"ButtonsCamp",setup(e){const s=G(),r=I(),a=O(),t=l(),o=$(),n=g(),N=C(()=>r.isRegisterPage?a.three?"Confirm":"Next":"Confirm"),J=C(()=>r.isRegisterPage&&a.two?"Back":"Cancel");function B(){if(r.isRegisterPage){if(!a.two)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){H(),a.two=!0;return}else{n.messageRequire.appear=!0,n.messageRequire.message="*Invalid email.";return}if(a.two&&!a.three&&Y(),a.three){if(!/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(o.password)){if(!/[A-Z]/.test(o.password)){n.messageRequire.appear=!0,n.messageRequire.message="*At least one uppercase letter.";return}if(!/[a-z]/.test(o.password)){n.messageRequire.appear=!0,n.messageRequire.message="*At least one lowercase letter.";return}if(!/\d/.test(o.password)){n.messageRequire.appear=!0,n.messageRequire.message="*At least one number.";return}if(!/[@$!%*?&]/.test(o.password)){n.messageRequire.appear=!0,n.messageRequire.message="*At least one special character.";return}if(o.password.length<8){n.messageRequire.appear=!0,n.messageRequire.message="*At least 8 characters.";return}}n.messageRequire.appear=!1,ne(),s.push("/login")}}else te()}function L(){if(a.three){a.two=!1,a.three=!1,n.messageRequire.appear=!1;return}if(a.two){a.two=!1,n.messageRequire.appear=!1;return}s.push("/")}return(z,q)=>(d(),p("ul",null,[c(n).messageRequire.appear?(d(),p("li",ie,v(c(n).messageRequire.message),1)):b("",!0),u("li",null,[u("button",{type:"button",onClick:q[0]||(q[0]=P=>L())},v(J.value),1)]),u("li",null,[u("button",{type:"button",onClick:q[1]||(q[1]=P=>B())},v(N.value),1)]),c(a).two&&!c(a).three?(d(),p("li",ue,[u("button",{type:"button",onClick:q[2]||(q[2]=P=>c(se)())},"Resend the code.")])):b("",!0)]))}},ce={},le={type:"button"};function me(e,s){return d(),p("button",le,"Google")}const he=E(ce,[["render",me]]),pe={};function de(e,s){return d(),p("ul",null,s[0]||(s[0]=[u("li",null,null,-1),u("li",null,null,-1),u("li",null,null,-1)]))}const we=E(pe,[["render",de]]);export{he as G,we as L,ge as _,qe as a,Re as b,K as c,I as i,oe as n,O as s};
